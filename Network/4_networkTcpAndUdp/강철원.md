
# 📖 TCP/IP

TCP/IP라고 알려진 인터넷 프로토콜 스위트(Internet Protocol Suite)는 인터넷과 이와 유사한 컴퓨터 네트워크 사이에 정보를 주고 받는데 이용되는 통신 프로토콜의 모음입니다.

전송 제어 프로토콜 (transmission Control Protocol: TCP)
인터넷 프로토콜 (Internet Protocol : IP)

우편 서비스를 이용하고 싶으면 정해진 규칙에 따라서 직접 붕투에 이름과 주소를 써야 했습니다.

봉투에 우표를 붙여서 빨간색 우편함에 편지를 넣으면 우체부가 우편을 처리할 때 더 많은 규칙이 적용되고는 했습니다.

인터넷상에 우표가 없긴는 하지만 엄연히 일정한 규칙이 존재합니다.

앱과 기기기는 정보를 전송하고 수신하기 위해 이러한 규칙을 따라야 합니다. 이러한 규칙을 TCP/IP 모델이라고 부릅니다.
 
 
 ## 📌 TCP/IP 란?
 
 TCP/IP는 네트워크 프로토콜 스위트로, 온라인상의 안전하고 효율적인 데이터 전송의 필수 요건을 정의합니다.
 
 TCP/IP 모델은 두 개의 기기 간에 데이터 전송하는 것을 담당하고 있습니다.인터넷 데이터가 전송되는 방식은 라디오와는 다릅니다. 수백 대의 컴퓨터 사이에서 활발하게 데이터가 공유되고 있는 것처럼 보여도, 사실은 모든 데이터 교환에는 2대의 기기만 개입됩니다.
 
 TCP/IP는 1983년에 표준 방식으로 정해졌습니다. 당시 TCP/IP가 NCP를 대체하면서, 이 과정에서 오는날 우리가 이용하는 인터넷이 탄생했습니다. TCP/IP는 4계층 또는 5계층으로 구성되어, OSI 7계층 모델을 대체합니다. 이러한 계층은 데이터 전송의 각 단계에서 앱과 기기의 작업을 설명해줍니다.
 
 ## ❓ TCP와 IP의 차이점
 
 TCP/IP는 수많은 컴퓨터 네트워크 프로토콜을 포함합니다. TCP와 IP는 이러한 프로토콜 중 하나일 뿐입니다.

TCP는 무엇의 약자일까요? TCP는 전송 제어 프로토콜 (Transmission Control Protocol)의 약자이며 한 기기에서 다른 기기로 데이터 전송하는 것을 담당합니다. IP는 인터넷 프로토콜(Internet Protocol)의 약자이며 이 프로토콜은 데이터의 조각을 최대한 빨리 대상 IP 주소로 보내는 역할을 표시합니다.

데이터 전송의 과정에서 TCP와 IP 각각 담당하는 작업이 있지만, 결국에는 같은 결과를 목표로 하기 때문에 한 명칭으로 알려지기도 합니다.


## 🫢 TCP/IP 주소
IP 주소의 유형은 정말 다양합니다. 예를 들면, IP 주소에는 공개 IP 주소와 비공개 IP 주소, 정적 IP 주소와 동적 IP 주소가 있습니다. 그러면 TCP/IP는 모든 유형의 IP 주소에서 작동하나요? 그럼요! 여러분이 이용하는 기기에서 어떤 인터넷 프로토콜을 사용하고 있는 것과 상관없이, TCP/IP 데이터 전송 절차의 일환으로 작동할 것입니다.

TCP/IP 주소를 알아보는 가장 쉬운 방법은 단연코 구글 검색창에 “What’s my IP address”를 검색해보는 방법입니다. 하지만, 여러분이 이용하는 네트워크 내 특정 기기의 IP 주소를 알아내려고 하는 경우에는 이 방법으로 현재 IP 주소를 알아낼 수 없습니다.

네트워크 프린터와 같은 기기의 IP 주소를 알아내려면 네트워크 설정으로 이동하여 IPv4를 찾아보세요. 죄송하지만 모든 운영체제에서 방금 말씀드린 방법으로 해당 IP 주소를 알아낼 수 있는 건 아닙니다. 운영체제마다 레이아웃이 다르기 때문에 이러한 기기의 IP 주소를 알아내는 방법이 조금씩 다를 수 있습니다.

<br>

## 🙋 TCP/IP 4계층

네트워크가 생겨나게 된 계기는 데이터를 주고받기 위해서입니다. 자신의 컴퓨터에만 존재하던 데이터를 다른 컴퓨터와 교환하기 위해 연결을 하면서 ‘네트워크’가 되고, 네트워크 집합들 간의 연결이 ‘인터넷’이 된 것입니다.

네트워크를 통해 하는 행동은, 내가 원하는 것을 상대방에게 “요청”하여 “응답”을 받는 것입니다. 바로 옆사람과 대화 주고받기, 서울 다른 구 사람과 대화 주고받기, 한국 다른 시의 사람과 대화 주고받기, 다른 나라의 사람과 대화 주고받기 등 과거라면 상상도 못할 먼 거리의 사람과 대화가 가능한 것도 바로 네트워크라는 환경이 존재하기 때문인 것입니다.


위에서 “사람”을 “컴퓨터에서 실행중인 “응용 프로그램(ex: 웹 브라우저)”로 바꿔도 이상할 것이 없습니다. 같은 컴퓨터안에서 다른 응용 프로그램과 통신하기, 같은 네트워크안에 있는 컴퓨터의 응용 프로그램과 통신하기, 다른 네트워크에 있는 컴퓨터의 응용 프로그램과 통신하기 등이 사람이 대화를 주고받는 것과 비슷한 행동인 것입니다.

예시를 통해서 TCP/IP 4계층을 알아 봅시다.

## 1️⃣ 응용계층

서울 시그니엘에서 사는 유진이가  하이브 연습실에서 연습하고 있는 채원에게 간식을 택배로 보낼려고 하면 어떻게해야할까요??

유진이가 궁금한 점이 있어 우편을 보낼 수 있듯이, 웹 브라우저(애플리케이션)는 화면에서 필요한 데이터를 요청하기 위해 `HTTP`데이터를 생성합니다.  또한  우편에 양식이 있는 것 처럼, HTTP도 양식이 존재합니다.  이러한 약속을 우리는 `프로토콜`이라고 합니다.

4단계 중 데이터를 생성하는 이 단계는 `응용계층`이라고 부릅니다. 응용프로그램에서 데이터가 생성된다는 의미를 담고 있습니다.


## 2️⃣ 전송계층

유진이가 이전처럼 우편을 작성하고 보낼 때 정확이 원하는 곳으로 보내져야합니다.   
그러기 위해서는 올바른 주소를 작성해야합니다. 정확히 위치가 어디고 몇층이고 몇번 연습실인지 알아야합니다.  

시그니엘에서 하이브 연습실로 택배가 보내지는 과정은 각 관리인을 통해서 진행됩니다.  유진이의 택배의 택배 전달은 시그니엘 관리인은 택배를 박스로 감싼 후(캡슐화), to. 시그니엘 몇층 몇호 유진  from 하이브 n층 연습실 m호 채원" 이라는 정보를 택배 상자 위에 붙이는 식입니다.   이는 크롬이라는 응용프로그램이 페이지 요청을 위해 HTTP(택배)를 운영체제에 보내는 것과 같습니다.

운영체제는 네트워크 통신을 원하는 응용프로그램에게 포트번호를 할당함과 동시에 관리를 하고 있습니다. 'netstate`이라는 명령어를 통해 운영체제가 관리하는 포트번호와 프로세스 (애플리케이션)의 관계를 알 수 있습니다.

그렇다면  하이브로 도착한 택배 어떻게 n층 연습실에 있는 채원이에게 전달될까요?
택배가 하이브 관리사무소에 도착하면 관리인이 먼저 받고 그 후, 관리자는 택배에 적힌 연습실 번호를 확인한 뒤 채원이에게 전달하는 것 입니다. 이는 데이터가 컴퓨터에게 전달되면, 운영체제가 데이터의 '받는 포트'를 확인하고 애플리케이션에 전달하는 것과 같습니다.

컴퓨터 세계에서 응용프로그램은 데이터를 스스로 가지지 못 합니다.  택배를 보내겠다는 유진이의 요청을 알게된 택배기사는 
채원이의 주소를 직접 확인하고 방문할 수 있지만 컴퓨터는 운영체제를 통해 주소를 확인해야합니다.
유진이의 주소를 확인하려면 시그니엘 관리인에게 확인해야 하는 상황이라고 생각하면 됩니다.  이를 컴퓨터에서는, 응용프로그램이 운영체제를 통해 포트번호를 알게 되는 과정이라고 볼 수 있습니다.

이 과정은 응용 프로그램으로 데이터의 송수신 즉, '전송'을 담당하는 단계로 `전송 계층`이라 부릅니다.

## 3️⃣ 인터넷 계층

이제 보내려고 했는데 송파구에 있는 하이브가 아니였습니다.  채윤에게 택배를 전달하기 위해 1차적으로 연습실 번호가 필요했다면 2차적으로는 그 연습실 번호가 어떤구에있는 하이브인지 알아야합니다. 그래서 시그니엘 관리인은 보내는 주소에 송파구 시그니엘 받는 곳은 서울 용산구 하이브라고 택배상자 위에 표시합니다. 즉 다시 한 번 캡슐화를 하는 것 입니다.

컴퓨터 세계에서는 송파구와 용산구 같은 지역을 네트워크라고 부릅니다. 네트워크와 네트워크의 연결을 인터넷이라 부릅니다. 수 많은 네트워크가 연결된, 인터넷에서 특정 주소를 의미하는 단어를 우리는 IP(Internet Protocol) 주소라고 부릅니다. IP는 인터넷 프로토콜의 약어로 인터넷에서 주소를 구분하고 찾기 위해 사용하는 약속입니다. 시그니엘이 송파구에 있다는 것 하이브가 용산구에 있다는 것을 식별하기 위해 반드시 필요한 주소 입니다. 즉 보내는 연습실 번호가 적힌 택배를 다시 상세 주소를 적는 것은 인터넷에서 특정 네트워크의 컴퓨터를 식별하기 위해 붙이는 IP주소로 빗댈 수 있습니다.

이 과정은 인터넷 목적지 주소를 찾기 위한 단계로, `인터넷 계층`이라 부릅니다.

포트번호를 캡슐화하는 전송계층, IP주소를 캡슐화하는 인터넷 계층에 해당하는 관리인의 역할을 네트워크에선 "운영체제"가 담당하게 됩니다.

## 4️⃣ 네트워크 계층

그런데 하이브는 라는 이름을 가진 곳은 용산구에 여러곳이 있습니다. 채원이가 있는 하이브는 어떻게 알까요?

채원이가 있는 연습실 회사 이름만으로는 채원이가 연습하는 회사가 어떤회사인지 알 수 없는 상황입니다.   현실에서는 이와 같은 상황에서 '지번'을 이용해여 해결할 수 있습니다.  땅 위에 건물들은 허물어짐과 다시 세워짐을 반복하지만 땅의 위치는 변하지 않습니다. 그래서 용산구 한강대로 42와 같은 땅의 주소를 이용하여 채원이가 연습하고 있는 연습실로 정확하게 전달할 수 있습니다.

또한 채원이의 연습실 회사가 하이루로 회사명이 변경되어도 땅의 주소는 변하지 않는 고유한 주소입니다.

컴퓨터 세계에서도 땅과 같이 컴퓨터의 고유한 주소를 표시하기 위한 장치가 존재합니다. 바로 NIC(Network interface Controller) 입니다.

<img width="350" alt="image" src="https://github.com/NextGen-Coders/CS-Study-2024/assets/76567238/8a6d45ff-5ff4-4233-921f-47f22ff19714">
(출처 :NVIDIA)

이는 컴퓨터가 네트워크로 접속하기 위해 반드시 피룡한 장치로, 네트워크와 컴퓨터를 이어주는, 즉 인터페이스의 역할을 해주는 장치라는 의미에서 '네트워크 인터페이스 기기'라는 이름을 갖고 있습니다.

NIC의 주소를 표기하는 방법으로 가장 많이 이용되고 있는 것은 이더넷 프로토콜입니다.

이더넷 프로토콜은 주소를 표시하기 위해 MAC(Media Access Control) 주소를 사용합니다. 여기서 미디어(매체)란, 이더넷 케이블, 광섬유 케이블과 같은 유선을 의미하거나 와이파이 같은 무선을 뜻합니다. 즉, 유선이 연결되는 NIC나 무선 와이파이를 송수신할 수 있는 화이파이 모듈과 같은 장치를 구분하는 주소라는 의미입니다.

이런 고유한 주소, 즉 MAC 주소 덕분에 데이터가 도달되어야 할 명확한 위치를 찾을 수 있었던 것입니다. 이 과정은 네트워크로 나가기 위한 마지막 단계로, 네트워크에 접속한다는 의미에서 '네트워크 액세스 계층' 이라 부릅니다. 관리인에게 택배를 전달받은 배달부가 우체국으로 배달하는 것 처럼, NIC의 역할을 하는 것입니다.

데이터가 최종 목적지로 전송되기 위해 필요한 1차 주소 포트번호, 2차 주소 IP주소 그리고 마지막 3차 주소는 MAC주소인 것 입니다.

지금까지 알아본 4 단계(응용, 전송, 인터넷, 네트워크 액세스)를 우리는 TCP/IP 모델이라고 부릅니다.



### Reference
- [TCP/IP란 무엇이며 어떤 원리로 작동하나요?](https://nordvpn.com/ko/blog/tcp-ip-protocol/)
- [https://yozm.wishket.com/magazine/detail/1956/](https://yozm.wishket.com/magazine/detail/1956/)
- [TCP/IP 쉽게 이해하기](https://aws-hyoh.tistory.com/entry/TCPIP-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0)
- [IP와 TCP는 무엇입니까?](https://www.cloudflare.com/ko-kr/learning/ddos/glossary/tcp-ip/)


# Blocking과 Non-Blocking

##  Blocking / Non-Blocking

Blocking과 Non-Blocking은 다른 주체가 작업할 때 자신의 제어권이 있는지 없는지로 구분합니다.

### Blocking

자신의 작업을 진행하다가 다른 주체의 작업이 시작되면 다른 작업이 끝날 때까지 기다렸다가 자신의 작업을 시작하는 방식입니다.

즉, 호출된 함수가 자신이 할 일을 모두 마칠 때까지 호출한 함수에게 제어권을 주지 않고 계속 가지고 있습니다.

### Non-Blocking

Non-Blocking은 다른 주체의 작업에 관련없이 자신의 작업하는 방식입니다.

즉, 호출된 함수가 자신이 할 일을 모두 마치지 않았더라도 바로 제어권을 건네주어 호출한 함수가 다른 일을 진행할 수 있도록 합니다.

<br>

## Blocking/Non-Blocking vs Sync / Async

동기/비동기 & 블로킹/논블로킹 두 개념을 비슷한 것으로 오해하는 분들이 꽤 많은 것 같습니다.

표현 형태는 비슷해 보이지만 서로 다른 차원에서 작업의 수행 방식을 설명하는 개념입니다. 동기/비동기는 요청한 작업에 대해 완료 여부를 신경 써서 작업을 순차적으로 수행할지 아닌지에 대한 관점이고,블로킹/논블록킹은 단어 그대로 현재 작업이 block(차단, 대기) 되느냐 아니냐에 따라 다른 작업을 수행할 수 있는지에 대한 관점입니다.

이처럼 두 개념에 대한 의미 차이는 명확하지만, 프로그래밍에서는 종종 혼용되어 사용되기도 합니다. 대표적으로 자바스크립트의 `setTimeout()` 함수를 일반적으로 비동기 함수라고만 부르지만, 동시에 논블로킹 함수이기도 합니다. 즉 우리가 편의상 부르는 `자바스크립트 비동기 함수`는 사실 `비동기 + 논블로킹 함수`인 것입니다. 따라서 이들을 정확하게 구분하고 이해하는 것이 컴퓨터 아키텍쳐를 이해하는데 있어 중요합니다.

## Sync / Async

Sync와 Async는 결과를 돌려주었을 때 순서와 결과에 관심이 있는지 없는지로 구분합니다. 

![](https://velog.velcdn.com/images/qorjiwon/post/bdaf140c-15b5-4ee9-b9e5-d4a4623b8874/image.png)

### Sync

`Synchronous`는 `작업 시간을 함께 맞춰서 실행한다.` 라는 뜻으로 해석됩니다. 즉 요청한 작업에 대해 완료 여부를 따져 순차적으로 처리하는 것을 말합니다.

### Async

Asynchronous는 앞에 A라는 접두사가 붙어 부정하는 형태입니다. 동기와 반대로, 요청한 작업에 대해 완료 여부를 따지지 않기 때문에 자신의 다음 작업을 그대로 수행하게 됩니다.

따라서 여러 작업이 동시에 실행되는 개념으로, 멀티 스레드나 멀티 프로세싱과 같은 방식으로 구현될 수 있습니다.

### 비동기의 성능 이점

보통 비동기 특징을 이용하여 성능과 연관지어 말합니다. 왜냐하면 요청한 작업에 대하여 완료 여부를 신경쓰지 않고 자신의 그다음 작업을 수행한다는 것은, I/O 작업과 같은 느린 작업이 발생할 때, 기다리지 않고 다른 작업을 처리하면서 동시에 처리하여 멀티 작업을 진행할수 있기 때문입니다. 이는 전반적인 시스템 성능 향상에 도움을 줄 수 있습니다.

![](https://velog.velcdn.com/images/qorjiwon/post/0413ce3b-8781-4990-b78a-eeca815039e5/image.png)

예를 들면, Web 애플리케이션에서 데이터베이스 쿼리를 수행하는 작업을 동기적으로 처리하면, 데이터베이스 응답이 올 때까지 기다려야 하므로 대규모 트래픽에서 성능이 저하될 수 있습니다. 반면, 비동기 방식으로 쿼리를 수행하면 데이터베이스 응답을 기다리는 동안에도 다른 요청을 동시에 처리할 수 있기 때문에 성능이 향상됩니다.

자바스크립트에서는 비동기 작업을 요청하면 브라우저의 Web API에서 작업이 백그라운드에서 동시에 처리되며, 메인 Call Stack과 독립적으로 작동합니다. 이를 통해 애니메이션 실행, 네트워크 통신, 마우스 및 키보드 입력, 타이머 등 다양한 비동기 작업을 처리할 수 있습니다

<br>

## 비동기와 논블로킹 개념 차이

아마 많은 분들이 가장 혼동하는 부분이 비동기와 논블로킹의 차이 부분일 것입니다. 포스팅 초반에서 자바스크립트의 setTimeout 함수를 비동기 함수이며 동시에 논블로킹 함수이라고 했던 얘기를 다시 떠올려 봅시다. 아래 코드는 setTimeout 함수를 사용하여 1초 후에 "Hello, world!"를 출력하는 비동기 논블로킹 코드의 예제입니다. 

```
console.log("시작");

setTimeout(() => {
  console.log("1초 후에 실행됩니다!");
}, 1000);

console.log("끝");
```

코드를 실행하면 다음과 같은 결과가 나오게 됩니다.

    시작
    끝
    1초 후에 실행됩니다!

이는 setTimeout 함수가 타이머 작업을 완료할 때까지 기다리지 않고 다음 코드를 바로 실행하기 때문입니다. setTimeout 함수의 타이머 작업 완료는 콜백 함수를 통해 알람을 받아 출력됩니다. 따라서 setTimeout은 비동기(Asynchronous)하게 동작합니다.

다른 관점에서 보면, 메인 함수 작업에 대해 setTimeout 함수는 자신의 타이머 작업을 백그라운드에서 별도로 처리하며 메인 함수를 블록하지 않습니다. 이로 인해 setTimeout 함수를 호출하고 즉시 다음 콘솔 함수를 호출할 수 있습니다. 따라서 setTimeout은 논블로킹(Non-blocking)하게 동작합니다.

따라서 이 두 용어를 혼용하여 사용되기도 하지만, 이론적으로 차이가 존재합니다. 결국, 코드에서는 시점과 관련된 이론적인 개념이라서 구분이 어려울 수 있습니다.

<br>

---

### 📌 Reference  

- [동기 vs 비동기 (feat. blocking vs non-blocking)](https://velog.io/@wonhee010/%EB%8F%99%EA%B8%B0vs%EB%B9%84%EB%8F%99%EA%B8%B0-feat.-blocking-vs-non-blocking)

- [완벽히 이해하는 동기/비동기 & 블로킹/논블로킹](https://inpa.tistory.com/entry/%F0%9F%91%A9%E2%80%8D%F0%9F%92%BB-%EB%8F%99%EA%B8%B0%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%B8%94%EB%A1%9C%ED%82%B9%EB%85%BC%EB%B8%94%EB%A1%9C%ED%82%B9-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A6%AC)

- [Sync/Async, Blocking/Non-Blocking 무슨 차이일까?](https://velog.io/@maketheworldwise/SyncAsync-BlockingNon-Blocking-%EB%AC%B4%EC%8A%A8-%EC%B0%A8%EC%9D%B4%EC%9D%BC%EA%B9%8C)

- [WTF is Synchronous and Asynchronous!](https://medium.com/from-the-scratch/wtf-is-synchronous-and-asynchronous-1a75afd039df)

- [블로킹 Vs. 논블로킹, 동기 Vs. 비동기](https://velog.io/@nittre/%EB%B8%94%EB%A1%9C%ED%82%B9-Vs.-%EB%85%BC%EB%B8%94%EB%A1%9C%ED%82%B9-%EB%8F%99%EA%B8%B0-Vs.-%EB%B9%84%EB%8F%99%EA%B8%B0)